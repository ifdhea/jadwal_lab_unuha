import{r as d,u as V,j as e,H as E,L as _,a as N}from"./app-BsRi02Wf.js";import{A as O}from"./app-layout-CdBpmueg.js";import{B as o}from"./button-4wnz9Zqb.js";import{I as L}from"./input-BYt-uUAG.js";import{T as R,a as U,b as k,c,d as $,e as t}from"./table-DRM6CSbC.js";import{S as h,a as m,b as x,c as u,d as a}from"./select-BiJMe3QD.js";import{B as S}from"./badge-C_t0DFeo.js";import{P as X,A as q,a as G,b as J,c as M,d as Q,e as W,f as Y,g as Z}from"./alert-dialog-DjuTxtoT.js";import{C as y}from"./circle-check-DQIK-M0p.js";import{P as ee}from"./plus-N0VNghkl.js";import{S as se}from"./search-CLez4lf4.js";import{F as ae}from"./filter-DKx0l9wP.js";import{X as le}from"./activity-feed-button-BJ1WYF4g.js";import{T as re}from"./trash-2-DHkJLRzk.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./building-2-QMJfTkD6.js";import"./calendar-DXPEKcan.js";import"./users-ezrJfIw7.js";import"./clock-CX7qgJh_.js";import"./index-VkL8W5Kt.js";import"./check-UcFQ4tla.js";function Fe({kelas:b,programStudi:D,kampus:F,tahunAjaran:K,filters:p,breadcrumbs:H}){const[f,g]=d.useState(null),{flash:i}=V().props,[T,w]=d.useState(!1),[v,A]=d.useState(!1),[l,C]=d.useState(p||{});d.useEffect(()=>{(i.success||i.error)&&(w(!0),setTimeout(()=>w(!1),3e3))},[i]),d.useEffect(()=>{const s=Object.values(p||{}).some(j=>j!==void 0&&j!=="");A(s)},[p]);const P=()=>{f&&N.delete(`/kelas/${f}`,{onSuccess:()=>g(null)})},n=(s,j)=>{C(I=>({...I,[s]:j}))},r=()=>{N.get("/kelas",l,{preserveState:!0})},B=()=>{C({}),N.get("/kelas",{},{preserveState:!0})},z=s=>{s.preventDefault(),r()};return e.jsxs(O,{breadcrumbs:H,children:[e.jsx(E,{title:"Kelas"}),T&&i.success&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-green-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:i.success})]})}),T&&i.error&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:i.error})]})}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Kelas"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola data kelas UNUHA"})]}),e.jsx(_,{href:"/kelas/create",children:e.jsxs(o,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Tambah Kelas"]})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("form",{onSubmit:z,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Cari nama atau kode kelas...",value:l.search||"",onChange:s=>{n("search",s.target.value),s.target.value===""&&r()},onKeyDown:s=>s.key==="Enter"&&r(),className:"pl-9 h-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:v?"default":"outline",onClick:()=>A(!v),className:"gap-2 h-10 whitespace-nowrap",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filter"}),Object.values(l).filter(s=>s).length>0&&e.jsx(S,{variant:"secondary",className:"ml-1 px-1.5 min-w-5 h-5",children:Object.values(l).filter(s=>s).length})]}),Object.values(l).some(s=>s)&&e.jsxs(o,{variant:"ghost",size:"sm",onClick:B,className:"h-10 gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),v&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 p-3 border rounded-lg bg-gradient-to-br from-muted/50 to-muted/30 backdrop-blur-sm",children:[e.jsxs(h,{value:l.program_studi_id||"all",onValueChange:s=>{n("program_studi_id",s==="all"?"":s),setTimeout(r,100)},children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(x,{placeholder:"Prodi"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua Prodi"}),D.map(s=>e.jsx(a,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(h,{value:l.kampus_id||"all",onValueChange:s=>{n("kampus_id",s==="all"?"":s),setTimeout(r,100)},children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(x,{placeholder:"Kampus"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua Kampus"}),F.map(s=>e.jsx(a,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(h,{value:l.tahun_ajaran_id||"all",onValueChange:s=>{n("tahun_ajaran_id",s==="all"?"":s),setTimeout(r,100)},children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(x,{placeholder:"Tahun Ajaran"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua Tahun"}),K.map(s=>e.jsx(a,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(h,{value:l.tingkat_semester||"all",onValueChange:s=>{n("tingkat_semester",s==="all"?"":s),setTimeout(r,100)},children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(x,{placeholder:"Semester"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua"}),[1,2,3,4,5,6,7,8].map(s=>e.jsxs(a,{value:String(s),children:["Semester ",s]},s))]})]}),e.jsxs(h,{value:l.is_aktif||"all",onValueChange:s=>{n("is_aktif",s==="all"?"":s),setTimeout(r,100)},children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(x,{placeholder:"Status"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua"}),e.jsx(a,{value:"true",children:"Aktif"}),e.jsx(a,{value:"false",children:"Tidak Aktif"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(R,{children:[e.jsx(U,{children:e.jsxs(k,{children:[e.jsx(c,{children:"Nama Kelas"}),e.jsx(c,{children:"Prodi"}),e.jsx(c,{children:"Kampus"}),e.jsx(c,{children:"Tahun Ajaran"}),e.jsx(c,{children:"Status"}),e.jsx(c,{className:"text-right",children:"Aksi"})]})}),e.jsx($,{children:b.length===0?e.jsx(k,{children:e.jsx(t,{colSpan:6,className:"text-center text-muted-foreground",children:"Belum ada data kelas"})}):b.map(s=>e.jsxs(k,{children:[e.jsx(t,{className:"font-medium",children:s.nama}),e.jsx(t,{children:s.program_studi.nama}),e.jsx(t,{children:s.kampus.nama}),e.jsx(t,{children:s.tahun_ajaran.nama}),e.jsx(t,{children:s.is_aktif?e.jsx(S,{variant:"default",children:"Aktif"}):e.jsx(S,{variant:"secondary",children:"Tidak Aktif"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{href:`/kelas/${s.id}/edit`,children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>g(s.id),children:e.jsx(re,{className:"h-4 w-4 text-destructive"})})]})})]},s.id))})]})}),e.jsx(q,{open:f!==null,onOpenChange:()=>g(null),children:e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsx(M,{children:"Konfirmasi Hapus"}),e.jsx(Q,{children:"Apakah Anda yakin ingin menghapus kelas ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(W,{children:[e.jsx(Y,{children:"Batal"}),e.jsx(Z,{onClick:P,children:"Hapus"})]})]})})]})})]})}export{Fe as default};
