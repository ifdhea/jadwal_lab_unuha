import{r as c,j as a,H as Y,L as q,a as p}from"./app-BsRi02Wf.js";import{A as G}from"./app-layout-CdBpmueg.js";import{B as t}from"./button-4wnz9Zqb.js";import{B as J}from"./badge-C_t0DFeo.js";import{C as S,a as D,b as y,c as w,d as Q}from"./card-CtvO2SYM.js";import{D as B,a as A,b as _,c as L,d as T,e as F}from"./activity-feed-button-BJ1WYF4g.js";import{S as U,a as W,b as Z,c as aa,d as r}from"./select-BiJMe3QD.js";import{T as I}from"./textarea-CQXLHOGr.js";import{L as g}from"./label-CW3bZicJ.js";import{I as ea}from"./input-BYt-uUAG.js";import{P as sa}from"./plus-N0VNghkl.js";import{B as ta}from"./building-2-QMJfTkD6.js";import{C as la}from"./calendar-DXPEKcan.js";import{C as M}from"./clock-CX7qgJh_.js";import{C as N}from"./circle-check-DQIK-M0p.js";import{C as k}from"./circle-x-C3lcXnzp.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./users-ezrJfIw7.js";import"./index-VkL8W5Kt.js";import"./check-UcFQ4tla.js";const na=[{title:"Dashboard",href:"/dashboard"},{title:"Booking Lab",href:"/booking-lab"}];function La({bookings:s,filters:f={},canApprove:C=!1,breadcrumbs:R=na}){const[o,m]=c.useState(null),[$,u]=c.useState(!1),[H,x]=c.useState(!1),[l,n]=c.useState(""),[i,h]=c.useState(!1),P=e=>{const d={menunggu:{variant:"default",label:"Menunggu",icon:M},disetujui:{variant:"success",label:"Disetujui",icon:N},ditolak:{variant:"destructive",label:"Ditolak",icon:k},selesai:{variant:"outline",label:"Selesai",icon:N},dibatalkan:{variant:"secondary",label:"Dibatalkan",icon:k}},j=d[e]||d.menunggu,X=j.icon;return a.jsxs(J,{variant:j.variant,className:`gap-1 ${j.className||""}`,children:[a.jsx(X,{className:"h-3 w-3"}),j.label]})},z=e=>{m(e),n(""),u(!0)},K=()=>{o&&(h(!0),p.post(`/booking-lab/${o.id}/approve`,{catatan_admin:l},{onSuccess:()=>{u(!1),m(null),n("")},onFinish:()=>h(!1)}))},O=e=>{m(e),n(""),x(!0)},E=()=>{!o||!l.trim()||(h(!0),p.post(`/booking-lab/${o.id}/reject`,{catatan_admin:l},{onSuccess:()=>{x(!1),m(null),n("")},onFinish:()=>h(!1)}))},V=e=>{confirm("Apakah Anda yakin ingin membatalkan booking ini?")&&p.post(`/booking-lab/${e.id}/cancel`)},b=(e,d)=>{p.get("/booking-lab",{...f,[e]:d==="all"?"":d},{preserveState:!0})},v=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"});return a.jsxs(G,{breadcrumbs:R,children:[a.jsx(Y,{title:"Booking Laboratorium"}),a.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Booking Laboratorium"}),a.jsx("p",{className:"text-muted-foreground",children:"Kelola booking laboratorium untuk kegiatan di luar jadwal kuliah"})]}),a.jsx(q,{href:"/booking-lab/create",children:a.jsxs(t,{children:[a.jsx(sa,{className:"mr-2 h-4 w-4"}),"Booking Lab"]})})]}),a.jsxs(S,{children:[a.jsx(D,{children:a.jsx(y,{children:"Filter"})}),a.jsx(w,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"w-64",children:[a.jsx(g,{children:"Status"}),a.jsxs(U,{value:f.status||"all",onValueChange:e=>b("status",e),children:[a.jsx(W,{children:a.jsx(Z,{placeholder:"Semua Status"})}),a.jsxs(aa,{children:[a.jsx(r,{value:"all",children:"Semua Status"}),a.jsx(r,{value:"menunggu",children:"Menunggu"}),a.jsx(r,{value:"disetujui",children:"Disetujui"}),a.jsx(r,{value:"ditolak",children:"Ditolak"}),a.jsx(r,{value:"selesai",children:"Selesai"}),a.jsx(r,{value:"dibatalkan",children:"Dibatalkan"})]})]})]}),a.jsxs("div",{className:"w-64",children:[a.jsx(g,{children:"Tanggal"}),a.jsx(ea,{type:"date",value:f.tanggal||"",onChange:e=>b("tanggal",e.target.value)})]})]})})]}),a.jsxs(S,{children:[a.jsxs(D,{children:[a.jsx(y,{children:"Daftar Booking"}),a.jsxs(Q,{children:[(Array.isArray(s)?s:s?.data||[]).length," booking ditemukan"]})]}),a.jsx(w,{children:(Array.isArray(s)?s:s?.data||[]).length>0?a.jsx("div",{className:"space-y-4",children:(Array.isArray(s)?s:s?.data||[]).map(e=>a.jsx("div",{className:"rounded-lg border p-4 hover:bg-accent/50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[P(e.status),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Diajukan ",v(e.tanggal_diajukan)]}),e.tanggal_diproses&&a.jsxs("span",{className:"text-sm text-muted-foreground",children:["â€¢ Diproses"," ",v(e.tanggal_diproses)]})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ta,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:e.laboratorium.nama}),a.jsxs("span",{className:"text-muted-foreground",children:["(",e.laboratorium.kampus,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(la,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:v(e.tanggal)})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{children:[e.waktu_mulai," -"," ",e.waktu_selesai]}),a.jsxs("span",{className:"text-muted-foreground",children:["(",e.durasi_slot," slot)"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-medium",children:["Dosen:"," "]}),a.jsx("span",{children:e.dosen.nama})]}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-medium",children:["Keperluan:"," "]}),a.jsx("span",{children:e.keperluan})]}),e.keterangan&&a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-medium",children:["Keterangan:"," "]}),a.jsx("span",{className:"text-muted-foreground",children:e.keterangan})]})]})]}),e.catatan_admin&&a.jsxs("div",{className:`rounded-lg border p-3 text-sm ${e.status==="ditolak"?"border-destructive/50 bg-destructive/10":"border-border bg-muted/50"}`,children:[a.jsxs("span",{className:"font-medium",children:["Catatan Admin:"," "]}),a.jsx("span",{children:e.catatan_admin}),e.diproses_oleh&&a.jsxs("span",{className:"text-muted-foreground",children:[" ","- ",e.diproses_oleh]})]})]}),a.jsxs("div",{className:"ml-4 flex gap-2",children:[e.status==="menunggu"&&C&&a.jsxs(a.Fragment,{children:[a.jsxs(t,{size:"sm",onClick:()=>z(e),children:[a.jsx(N,{className:"mr-2 h-4 w-4"}),"Setujui"]}),a.jsxs(t,{size:"sm",variant:"destructive",onClick:()=>O(e),children:[a.jsx(k,{className:"mr-2 h-4 w-4"}),"Tolak"]})]}),(e.status==="menunggu"||e.status==="disetujui")&&!C&&a.jsx(t,{size:"sm",variant:"outline",onClick:()=>V(e),children:"Batalkan"})]})]})},e.id))}):a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Tidak ada booking laboratorium"})})]})]}),a.jsx(B,{open:$,onOpenChange:u,children:a.jsxs(A,{children:[a.jsxs(_,{children:[a.jsx(L,{children:"Setujui Booking Lab"}),a.jsx(T,{children:"Apakah Anda yakin ingin menyetujui booking laboratorium ini?"})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(g,{htmlFor:"catatan",children:"Catatan (Opsional)"}),a.jsx(I,{id:"catatan",value:l,onChange:e=>n(e.target.value),placeholder:"Tambahkan catatan jika diperlukan...",rows:3})]})}),a.jsxs(F,{children:[a.jsx(t,{variant:"outline",onClick:()=>u(!1),disabled:i,children:"Batal"}),a.jsx(t,{onClick:K,disabled:i,children:i?"Memproses...":"Ya, Setujui"})]})]})}),a.jsx(B,{open:H,onOpenChange:x,children:a.jsxs(A,{children:[a.jsxs(_,{children:[a.jsx(L,{children:"Tolak Booking Lab"}),a.jsx(T,{children:"Silakan berikan alasan penolakan booking laboratorium ini."})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs(g,{htmlFor:"alasan",children:["Alasan Penolakan ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(I,{id:"alasan",value:l,onChange:e=>n(e.target.value),placeholder:"Masukkan alasan penolakan...",rows:4})]})}),a.jsxs(F,{children:[a.jsx(t,{variant:"outline",onClick:()=>x(!1),disabled:i,children:"Batal"}),a.jsx(t,{variant:"destructive",onClick:E,disabled:i||!l.trim(),children:i?"Memproses...":"Tolak Booking"})]})]})})]})}export{La as default};
