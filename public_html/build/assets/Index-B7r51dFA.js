import{r as i,u as I,j as e,H as E,L as A,a as j}from"./app-BsRi02Wf.js";import{A as O}from"./app-layout-CdBpmueg.js";import{B as n}from"./button-4wnz9Zqb.js";import{I as L}from"./input-BYt-uUAG.js";import{T as M,a as V,b as g,c as m,d as R,e as c}from"./table-DRM6CSbC.js";import{S as f,a as v,b as N,c as k,d as r}from"./select-BiJMe3QD.js";import{B as $}from"./badge-C_t0DFeo.js";import{P as X,A as q,a as G,b as J,c as Q,d as U,e as W,f as Y,g as Z}from"./alert-dialog-DjuTxtoT.js";import{C as y}from"./circle-check-DQIK-M0p.js";import{P as ee}from"./plus-N0VNghkl.js";import{S as se}from"./search-CLez4lf4.js";import{F as ae}from"./filter-DKx0l9wP.js";import{X as le}from"./activity-feed-button-BJ1WYF4g.js";import{T as te}from"./trash-2-DHkJLRzk.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./building-2-QMJfTkD6.js";import"./calendar-DXPEKcan.js";import"./users-ezrJfIw7.js";import"./clock-CX7qgJh_.js";import"./index-VkL8W5Kt.js";import"./check-UcFQ4tla.js";function Fe({kelasMataKuliah:S,kelas:D,mataKuliah:K,semester:F,filters:h,breadcrumbs:_}){const[x,u]=i.useState(null),{flash:l}=I().props,[b,w]=i.useState(!1),[p,C]=i.useState(!1),[a,T]=i.useState(h||{});i.useEffect(()=>{(l.success||l.error)&&(w(!0),setTimeout(()=>w(!1),3e3))},[l]),i.useEffect(()=>{const s=Object.values(h||{}).some(o=>o!==void 0&&o!=="");C(s)},[h]);const B=()=>{x&&j.delete(`/kelas-matkul/${x}`,{onSuccess:()=>u(null)})},d=(s,o)=>{T(z=>({...z,[s]:o}))},t=()=>{j.get("/kelas-matkul",a,{preserveState:!0})},H=()=>{T({}),j.get("/kelas-matkul",{},{preserveState:!0})},P=s=>{s.preventDefault(),t()};return e.jsxs(O,{breadcrumbs:_,children:[e.jsx(E,{title:"Kelas & Mata Kuliah"}),b&&l.success&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-green-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:l.success})]})}),b&&l.error&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:l.error})]})}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Penugasan Kelas & Mata Kuliah"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola mata kuliah yang diambil oleh setiap kelas per semester."})]}),e.jsx(A,{href:"/kelas-matkul/create",children:e.jsxs(n,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Buat Penugasan"]})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("form",{onSubmit:P,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Cari kelas atau mata kuliah...",value:a.search||"",onChange:s=>{d("search",s.target.value),s.target.value===""&&t()},onKeyDown:s=>s.key==="Enter"&&t(),className:"pl-9 h-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:p?"default":"outline",onClick:()=>C(!p),className:"gap-2 h-10 whitespace-nowrap",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filter"}),Object.values(a).filter(s=>s).length>0&&e.jsx($,{variant:"secondary",className:"ml-1 px-1.5 min-w-5 h-5",children:Object.values(a).filter(s=>s).length})]}),Object.values(a).some(s=>s)&&e.jsxs(n,{variant:"ghost",size:"sm",onClick:H,className:"h-10 gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 p-3 border rounded-lg bg-gradient-to-br from-muted/50 to-muted/30 backdrop-blur-sm",children:[e.jsxs(f,{value:a.kelas_id||"all",onValueChange:s=>{d("kelas_id",s==="all"?"":s),setTimeout(t,100)},children:[e.jsx(v,{className:"h-9 text-sm",children:e.jsx(N,{placeholder:"Kelas"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Kelas"}),D.map(s=>e.jsx(r,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(f,{value:a.mata_kuliah_id||"all",onValueChange:s=>{d("mata_kuliah_id",s==="all"?"":s),setTimeout(t,100)},children:[e.jsx(v,{className:"h-9 text-sm",children:e.jsx(N,{placeholder:"Mata Kuliah"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Mata Kuliah"}),K.map(s=>e.jsx(r,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(f,{value:a.semester_id||"all",onValueChange:s=>{d("semester_id",s==="all"?"":s),setTimeout(t,100)},children:[e.jsx(v,{className:"h-9 text-sm",children:e.jsx(N,{placeholder:"Semester"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Semester"}),F.map(s=>e.jsx(r,{value:String(s.id),children:s.nama},s.id))]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(M,{children:[e.jsx(V,{children:e.jsxs(g,{children:[e.jsx(m,{children:"Kelas"}),e.jsx(m,{children:"Mata Kuliah"}),e.jsx(m,{children:"Semester Akademik"}),e.jsx(m,{className:"text-right",children:"Aksi"})]})}),e.jsx(R,{children:S.length===0?e.jsx(g,{children:e.jsx(c,{colSpan:4,className:"text-center text-muted-foreground",children:"Belum ada data penugasan"})}):S.map(s=>e.jsxs(g,{children:[e.jsx(c,{className:"font-medium",children:s.kelas.nama}),e.jsxs(c,{children:[s.mata_kuliah.nama," (",s.mata_kuliah.sks," SKS)"]}),e.jsx(c,{children:s.semester.nama}),e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{href:`/kelas-matkul/${s.id}/edit`,children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>u(s.id),children:e.jsx(te,{className:"h-4 w-4 text-destructive"})})]})})]},s.id))})]})}),e.jsx(q,{open:x!==null,onOpenChange:()=>u(null),children:e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsx(Q,{children:"Konfirmasi Hapus"}),e.jsx(U,{children:"Apakah Anda yakin ingin menghapus penugasan ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(W,{children:[e.jsx(Y,{children:"Batal"}),e.jsx(Z,{onClick:B,children:"Hapus"})]})]})})]})})]})}export{Fe as default};
