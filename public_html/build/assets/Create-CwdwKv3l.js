import{b as B,r as c,j as a,H as E,L as A,c as H}from"./app-BsRi02Wf.js";import{A as I}from"./app-layout-CdBpmueg.js";import{B as h}from"./button-4wnz9Zqb.js";import{C as x,a as j,b as u,d as p,c as _}from"./card-CtvO2SYM.js";import{S as g,a as k,b as f,c as w,d as v}from"./select-BiJMe3QD.js";import{T as z}from"./textarea-CQXLHOGr.js";import{L as n}from"./label-CW3bZicJ.js";import{A as C,a as S}from"./alert-Ckucn3LG.js";import{A as O}from"./arrow-left-99kuOXcC.js";import{C as R}from"./calendar-DXPEKcan.js";import{C as q}from"./circle-alert-DganHivA.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./activity-feed-button-BJ1WYF4g.js";import"./index-CZi-UQ4q.js";import"./badge-C_t0DFeo.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-D-s97nNy.js";import"./clock-CX7qgJh_.js";import"./building-2-QMJfTkD6.js";import"./users-ezrJfIw7.js";import"./index-VkL8W5Kt.js";import"./check-UcFQ4tla.js";const G=[{title:"Dashboard",href:"/dashboard"},{title:"Tukar Jadwal",href:"/tukar-jadwal"},{title:"Ajukan Tukar Jadwal",href:"/tukar-jadwal/create"}];function pa({jadwalDosen:N,dosenLain:J}){const{data:r,setData:t,post:D,processing:d,errors:i}=B({sesi_jadwal_pemohon_id:"",mitra_id:"",sesi_jadwal_mitra_id:"",alasan_pemohon:""}),[y,m]=c.useState([]),[M,b]=c.useState(!1),[s,T]=c.useState(null),P=e=>{t("sesi_jadwal_pemohon_id",e);const l=N.find(V=>V.id.toString()===e);T(l||null),t("sesi_jadwal_mitra_id",""),m([])},L=async e=>{if(t("mitra_id",e),t("sesi_jadwal_mitra_id",""),!!s){b(!0);try{const l=await H.get("/tukar-jadwal/jadwal-mitra",{params:{mitra_id:e,tanggal:s.tanggal}});m(l.data.jadwal||[])}catch(l){console.error("Error fetching jadwal mitra:",l),m([])}finally{b(!1)}}},F=e=>{e.preventDefault(),D("/tukar-jadwal")},o=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"});return a.jsxs(I,{breadcrumbs:G,children:[a.jsx(E,{title:"Ajukan Tukar Jadwal"}),a.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(A,{href:"/tukar-jadwal",children:a.jsx(h,{variant:"outline",size:"icon",children:a.jsx(O,{className:"h-4 w-4"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ajukan Tukar Jadwal"}),a.jsx("p",{className:"text-muted-foreground",children:"Ajukan permintaan tukar jadwal dengan dosen lain"})]})]}),a.jsxs("form",{onSubmit:F,className:"space-y-6",children:[a.jsxs(x,{children:[a.jsxs(j,{children:[a.jsx(u,{children:"1. Pilih Jadwal Anda yang Ingin Ditukar"}),a.jsx(p,{children:"Pilih jadwal mengajar Anda yang ingin ditukar dengan dosen lain"})]}),a.jsxs(_,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(n,{htmlFor:"sesi_jadwal_pemohon_id",children:["Jadwal Mengajar Anda ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsxs(g,{value:r.sesi_jadwal_pemohon_id,onValueChange:P,children:[a.jsx(k,{children:a.jsx(f,{placeholder:"Pilih jadwal yang ingin ditukar"})}),a.jsx(w,{children:N.map(e=>a.jsx(v,{value:e.id.toString(),children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"font-medium",children:[e.mata_kuliah," - ",e.kelas]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.hari,", ",o(e.tanggal)," •"," ",e.waktu_mulai," - ",e.waktu_selesai," •"," ",e.laboratorium]})]})},e.id))})]}),i.sesi_jadwal_pemohon_id&&a.jsx("p",{className:"text-sm text-destructive",children:i.sesi_jadwal_pemohon_id})]}),s&&a.jsxs(C,{children:[a.jsx(R,{className:"h-4 w-4"}),a.jsx(S,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-medium",children:s.mata_kuliah}),a.jsxs("div",{className:"text-sm",children:[s.hari,","," ",o(s.tanggal)," •"," ",s.waktu_mulai," -"," ",s.waktu_selesai]}),a.jsxs("div",{className:"text-sm",children:[s.laboratorium," •"," ","Pertemuan ke-",s.pertemuan_ke]})]})})]})]})]}),s&&a.jsxs(x,{children:[a.jsxs(j,{children:[a.jsx(u,{children:"2. Pilih Dosen Mitra (Opsional)"}),a.jsx(p,{children:"Anda bisa memilih dosen tertentu untuk tukar jadwal, atau biarkan kosong untuk permintaan umum"})]}),a.jsxs(_,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"mitra_id",children:"Dosen Mitra"}),a.jsxs(g,{value:r.mitra_id,onValueChange:L,children:[a.jsx(k,{children:a.jsx(f,{placeholder:"Pilih dosen mitra (opsional)"})}),a.jsx(w,{children:J.map(e=>a.jsxs(v,{value:e.id.toString(),children:[e.nama," (",e.nidn,")"]},e.id))})]}),i.mitra_id&&a.jsx("p",{className:"text-sm text-destructive",children:i.mitra_id})]}),r.mitra_id&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"sesi_jadwal_mitra_id",children:"Jadwal Mitra di Tanggal yang Sama"}),M?a.jsx("div",{className:"py-4 text-center text-sm text-muted-foreground",children:"Memuat jadwal mitra..."}):y.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(g,{value:r.sesi_jadwal_mitra_id,onValueChange:e=>t("sesi_jadwal_mitra_id",e),children:[a.jsx(k,{children:a.jsx(f,{placeholder:"Pilih jadwal mitra (opsional)"})}),a.jsx(w,{children:y.map(e=>a.jsx(v,{value:e.id.toString(),children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"font-medium",children:[e.mata_kuliah," -"," ",e.kelas]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.waktu_mulai," -"," ",e.waktu_selesai," •"," ",e.laboratorium]})]})},e.id))})]}),i.sesi_jadwal_mitra_id&&a.jsx("p",{className:"text-sm text-destructive",children:i.sesi_jadwal_mitra_id})]}):a.jsxs(C,{children:[a.jsx(q,{className:"h-4 w-4"}),a.jsxs(S,{children:["Dosen mitra tidak memiliki jadwal di tanggal yang sama (",o(s.tanggal),")"]})]})]})]})]}),s&&a.jsxs(x,{children:[a.jsxs(j,{children:[a.jsx(u,{children:"3. Alasan Tukar Jadwal"}),a.jsx(p,{children:"Jelaskan alasan Anda mengajukan tukar jadwal"})]}),a.jsx(_,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs(n,{htmlFor:"alasan_pemohon",children:["Alasan ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(z,{id:"alasan_pemohon",value:r.alasan_pemohon,onChange:e=>t("alasan_pemohon",e.target.value),placeholder:"Contoh: Ada keperluan mendadak yang tidak bisa ditunda...",rows:4}),i.alasan_pemohon&&a.jsx("p",{className:"text-sm text-destructive",children:i.alasan_pemohon})]})})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(A,{href:"/tukar-jadwal",children:a.jsx(h,{type:"button",variant:"outline",disabled:d,children:"Batal"})}),a.jsx(h,{type:"submit",disabled:d||!s,children:d?"Menyimpan...":"Ajukan Tukar Jadwal"})]})]})]})]})}export{pa as default};
