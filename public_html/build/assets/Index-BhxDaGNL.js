import{r as l,j as a,H as K,L as X,a as h}from"./app-BsRi02Wf.js";import{A as Y}from"./app-layout-CdBpmueg.js";import{B as s}from"./button-4wnz9Zqb.js";import{A as v,B as q}from"./badge-C_t0DFeo.js";import{C as N,a as w,b,c as _,d as G}from"./card-CtvO2SYM.js";import{D as C,a as S,b as D,c as y,d as A,e as T}from"./activity-feed-button-BJ1WYF4g.js";import{S as Q,a as U,b as W,c as Z,d as r}from"./select-BiJMe3QD.js";import{T as aa}from"./textarea-CQXLHOGr.js";import{L as R}from"./label-CW3bZicJ.js";import{P as ea}from"./plus-N0VNghkl.js";import{C as B}from"./calendar-DXPEKcan.js";import{C as g}from"./clock-CX7qgJh_.js";import{C as J}from"./circle-check-DQIK-M0p.js";import{C as f}from"./circle-x-C3lcXnzp.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./building-2-QMJfTkD6.js";import"./users-ezrJfIw7.js";import"./index-VkL8W5Kt.js";import"./check-UcFQ4tla.js";const sa=[{title:"Dashboard",href:"/dashboard"},{title:"Tukar Jadwal",href:"/tukar-jadwal"}];function ya({tukarJadwals:x,filters:F,dosenId:na}){const[t,i]=l.useState(null),[I,d]=l.useState(!1),[L,c]=l.useState(!1),[o,j]=l.useState(""),[n,m]=l.useState(!1),P=e=>{const k={menunggu:{variant:"default",label:"Menunggu",icon:g},disetujui:{variant:"success",label:"Disetujui",icon:J},ditolak:{variant:"destructive",label:"Ditolak",icon:f},dibatalkan:{variant:"secondary",label:"Dibatalkan",icon:f}},p=k[e]||k.menunggu,V=p.icon;return a.jsxs(q,{variant:p.variant,className:"gap-1",children:[a.jsx(V,{className:"h-3 w-3"}),p.label]})},M=e=>{i(e),d(!0)},H=()=>{t&&(m(!0),h.post(`/tukar-jadwal/${t.id}/approve`,{},{onSuccess:()=>{d(!1),i(null)},onFinish:()=>m(!1)}))},z=e=>{i(e),c(!0),j("")},$=()=>{!t||!o.trim()||(m(!0),h.post(`/tukar-jadwal/${t.id}/reject`,{alasan_penolakan:o},{onSuccess:()=>{c(!1),i(null),j("")},onFinish:()=>m(!1)}))},E=e=>{confirm("Apakah Anda yakin ingin membatalkan permintaan tukar jadwal ini?")&&h.post(`/tukar-jadwal/${e.id}/cancel`)},O=e=>{h.get("/tukar-jadwal",{status:e==="all"?"":e},{preserveState:!0})},u=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"});return a.jsxs(Y,{breadcrumbs:sa,children:[a.jsx(K,{title:"Tukar Jadwal"}),a.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tukar Jadwal"}),a.jsx("p",{className:"text-muted-foreground",children:"Kelola permintaan tukar jadwal dengan dosen lain"})]}),a.jsx(X,{href:"/tukar-jadwal/create",children:a.jsxs(s,{children:[a.jsx(ea,{className:"mr-2 h-4 w-4"}),"Ajukan Tukar Jadwal"]})})]}),a.jsxs(N,{children:[a.jsx(w,{children:a.jsx(b,{children:"Filter"})}),a.jsx(_,{children:a.jsx("div",{className:"flex gap-4",children:a.jsxs("div",{className:"w-64",children:[a.jsx(R,{children:"Status"}),a.jsxs(Q,{value:F.status||"all",onValueChange:O,children:[a.jsx(U,{children:a.jsx(W,{placeholder:"Semua Status"})}),a.jsxs(Z,{children:[a.jsx(r,{value:"all",children:"Semua Status"}),a.jsx(r,{value:"menunggu",children:"Menunggu"}),a.jsx(r,{value:"disetujui",children:"Disetujui"}),a.jsx(r,{value:"ditolak",children:"Ditolak"}),a.jsx(r,{value:"dibatalkan",children:"Dibatalkan"})]})]})]})})})]}),a.jsxs(N,{children:[a.jsxs(w,{children:[a.jsx(b,{children:"Daftar Permintaan Tukar Jadwal"}),a.jsxs(G,{children:[x.data.length," permintaan ditemukan"]})]}),a.jsx(_,{children:x.data.length>0?a.jsx("div",{className:"space-y-4",children:x.data.map(e=>a.jsx("div",{className:"rounded-lg border p-4 hover:bg-accent/50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[P(e.status),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Diajukan ",u(e.tanggal_diajukan)]}),e.tanggal_diproses&&a.jsxs("span",{className:"text-sm text-muted-foreground",children:["â€¢ Diproses"," ",u(e.tanggal_diproses)]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2 rounded-lg border p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(v,{className:"h-4 w-4"}),e.is_pemohon?"Jadwal Saya":e.pemohon.nama]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsx("div",{className:"font-medium",children:e.sesi_pemohon.mata_kuliah}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(B,{className:"h-3 w-3"}),e.sesi_pemohon.hari,","," ",u(e.sesi_pemohon.tanggal)]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(g,{className:"h-3 w-3"}),e.sesi_pemohon.waktu_mulai," -"," ",e.sesi_pemohon.waktu_selesai]}),a.jsx("div",{className:"text-muted-foreground",children:e.sesi_pemohon.laboratorium})]})]}),e.sesi_mitra&&a.jsxs("div",{className:"space-y-2 rounded-lg border p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(v,{className:"h-4 w-4"}),e.is_mitra?"Jadwal Saya":e.mitra?.nama]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsx("div",{className:"font-medium",children:e.sesi_mitra.mata_kuliah}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(B,{className:"h-3 w-3"}),e.sesi_mitra.hari,","," ",u(e.sesi_mitra.tanggal)]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(g,{className:"h-3 w-3"}),e.sesi_mitra.waktu_mulai," -"," ",e.sesi_mitra.waktu_selesai]}),a.jsx("div",{className:"text-muted-foreground",children:e.sesi_mitra.laboratorium})]})]})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Alasan: "}),a.jsx("span",{className:"text-muted-foreground",children:e.alasan_pemohon})]}),e.alasan_penolakan&&a.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm",children:[a.jsxs("span",{className:"font-medium",children:["Alasan Penolakan:"," "]}),a.jsx("span",{children:e.alasan_penolakan})]})]}),e.status==="menunggu"&&a.jsxs("div",{className:"ml-4 flex gap-2",children:[e.is_mitra&&a.jsxs(a.Fragment,{children:[a.jsxs(s,{size:"sm",onClick:()=>M(e),children:[a.jsx(J,{className:"mr-2 h-4 w-4"}),"Setujui"]}),a.jsxs(s,{size:"sm",variant:"destructive",onClick:()=>z(e),children:[a.jsx(f,{className:"mr-2 h-4 w-4"}),"Tolak"]})]}),e.is_pemohon&&a.jsx(s,{size:"sm",variant:"outline",onClick:()=>E(e),children:"Batalkan"})]})]})},e.id))}):a.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Tidak ada permintaan tukar jadwal"})})]})]}),a.jsx(C,{open:I,onOpenChange:d,children:a.jsxs(S,{children:[a.jsxs(D,{children:[a.jsx(y,{children:"Setujui Tukar Jadwal"}),a.jsx(A,{children:"Apakah Anda yakin ingin menyetujui permintaan tukar jadwal ini? Jadwal Anda akan otomatis ditukar dengan jadwal pemohon."})]}),a.jsxs(T,{children:[a.jsx(s,{variant:"outline",onClick:()=>d(!1),disabled:n,children:"Batal"}),a.jsx(s,{onClick:H,disabled:n,children:n?"Memproses...":"Ya, Setujui"})]})]})}),a.jsx(C,{open:L,onOpenChange:c,children:a.jsxs(S,{children:[a.jsxs(D,{children:[a.jsx(y,{children:"Tolak Tukar Jadwal"}),a.jsx(A,{children:"Silakan berikan alasan penolakan permintaan tukar jadwal ini."})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(R,{htmlFor:"alasan",children:"Alasan Penolakan"}),a.jsx(aa,{id:"alasan",value:o,onChange:e=>j(e.target.value),placeholder:"Masukkan alasan penolakan...",rows:4})]})}),a.jsxs(T,{children:[a.jsx(s,{variant:"outline",onClick:()=>c(!1),disabled:n,children:"Batal"}),a.jsx(s,{variant:"destructive",onClick:$,disabled:n||!o.trim(),children:n?"Memproses...":"Tolak Permintaan"})]})]})})]})}export{ya as default};
