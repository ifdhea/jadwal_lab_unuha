import{r as i,j as e,H as R,a as g}from"./app-BsRi02Wf.js";import{A as F}from"./app-layout-CdBpmueg.js";import{B as r}from"./button-4wnz9Zqb.js";import{U as H,B as q}from"./badge-C_t0DFeo.js";import{C as I,a as O,b as z,c as E}from"./card-CtvO2SYM.js";import{D as f,a as v,b as N,c as k,d as C,e as b}from"./activity-feed-button-BJ1WYF4g.js";import{T as D}from"./textarea-CQXLHOGr.js";import{L as B}from"./label-CW3bZicJ.js";import{B as P}from"./building-2-QMJfTkD6.js";import{C as w}from"./clock-CX7qgJh_.js";import{C as x}from"./circle-check-DQIK-M0p.js";import{C as h}from"./circle-x-C3lcXnzp.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./calendar-DXPEKcan.js";import"./users-ezrJfIw7.js";function me({bookings:p,filters:U={}}){const[l,d]=i.useState(null),[y,c]=i.useState(!1),[S,o]=i.useState(!1),[s,t]=i.useState(""),[n,m]=i.useState(!1),A=a=>{const j={menunggu:{variant:"default",label:"Menunggu",icon:w},disetujui:{variant:"success",label:"Disetujui",icon:x},ditolak:{variant:"destructive",label:"Ditolak",icon:h},dibatalkan:{variant:"secondary",label:"Dibatalkan",icon:h},selesai:{variant:"outline",label:"Selesai",icon:x}},u=j[a]||j.menunggu,M=u.icon;return e.jsxs(q,{variant:u.variant,className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),u.label]})},_=a=>{d(a),t(""),c(!0)},T=a=>{d(a),t(""),o(!0)},L=()=>{l&&(m(!0),g.post(`/booking-lab/${l.id}/approve`,{catatan_admin:s},{onFinish:()=>{m(!1),c(!1),d(null),t("")}}))},K=()=>{!l||!s.trim()||(m(!0),g.post(`/booking-lab/${l.id}/reject`,{catatan_admin:s},{onFinish:()=>{m(!1),o(!1),d(null),t("")}}))};return e.jsxs(F,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Booking Lab - Admin",href:"/admin/booking-lab"}],children:[e.jsx(R,{title:"Booking Lab - Admin"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manajemen Booking Laboratorium"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola dan approve request booking laboratorium dari dosen"})]})}),e.jsxs(I,{children:[e.jsx(O,{children:e.jsx(z,{children:"Daftar Request Booking"})}),e.jsx(E,{children:p.data.length>0?e.jsx("div",{className:"space-y-4",children:p.data.map(a=>e.jsx("div",{className:"rounded-lg border p-4 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[A(a.status),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(a.tanggal).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(H,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:a.dosen.nama}),e.jsx("p",{className:"text-muted-foreground",children:a.dosen.nidn})]})]}),a.mata_kuliah&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Mata Kuliah"}),e.jsxs("p",{children:[a.mata_kuliah.nama," (",a.mata_kuliah.sks," SKS)"]}),a.kelas&&e.jsxs("p",{className:"text-muted-foreground",children:["Kelas: ",a.kelas]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:a.laboratorium.nama}),e.jsx("p",{className:"text-muted-foreground",children:a.laboratorium.kampus})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(w,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium",children:[a.waktu_mulai.slice(0,5)," - ",a.waktu_selesai.slice(0,5)]}),e.jsxs("p",{className:"text-muted-foreground",children:[a.durasi_slot," slot"]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Keperluan"}),e.jsx("p",{children:a.keperluan})]}),a.keterangan&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Keterangan"}),e.jsx("p",{children:a.keterangan})]})]}),a.catatan_admin&&e.jsxs("div",{className:"rounded bg-muted p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Catatan Admin"}),e.jsx("p",{children:a.catatan_admin})]})]}),a.status==="menunggu"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>_(a),children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),"Setujui"]}),e.jsxs(r,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>T(a),children:[e.jsx(h,{className:"h-4 w-4 mr-1"}),"Tolak"]})]})]})},a.id))}):e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Belum ada request booking"})})]})]}),e.jsx(f,{open:y,onOpenChange:c,children:e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(k,{children:"Setujui Booking"}),e.jsx(C,{children:"Apakah Anda yakin ingin menyetujui booking ini?"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx(B,{htmlFor:"approve-note",children:"Catatan (Opsional)"}),e.jsx(D,{id:"approve-note",placeholder:"Tambahkan catatan jika diperlukan...",value:s,onChange:a=>t(a.target.value),rows:3})]}),e.jsxs(b,{children:[e.jsx(r,{variant:"outline",onClick:()=>c(!1),disabled:n,children:"Batal"}),e.jsx(r,{onClick:L,disabled:n,children:n?"Memproses...":"Setujui"})]})]})}),e.jsx(f,{open:S,onOpenChange:o,children:e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(k,{children:"Tolak Booking"}),e.jsx(C,{children:"Berikan alasan penolakan booking ini"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(B,{htmlFor:"reject-note",children:["Alasan Penolakan ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(D,{id:"reject-note",placeholder:"Masukkan alasan penolakan...",value:s,onChange:a=>t(a.target.value),rows:3})]}),e.jsxs(b,{children:[e.jsx(r,{variant:"outline",onClick:()=>o(!1),disabled:n,children:"Batal"}),e.jsx(r,{variant:"destructive",onClick:K,disabled:n||!s.trim(),children:n?"Memproses...":"Tolak"})]})]})})]})}export{me as default};
