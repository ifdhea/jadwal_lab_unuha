import{r as d,u as z,j as e,H as I,L as _,a as N}from"./app-BsRi02Wf.js";import{A as V}from"./app-layout-CdBpmueg.js";import{B as h}from"./button-4wnz9Zqb.js";import{I as E}from"./input-BYt-uUAG.js";import{T as O,a as M,b as k,c as r,d as R,e as t}from"./table-DRM6CSbC.js";import{S as o,a as x,b as m,c as u,d as a}from"./select-BiJMe3QD.js";import{B as b}from"./badge-C_t0DFeo.js";import{P as G,A as U,a as $,b as X,c as q,d as J,e as Q,f as W,g as Y}from"./alert-dialog-DjuTxtoT.js";import{C as y}from"./circle-check-DQIK-M0p.js";import{P as Z}from"./plus-N0VNghkl.js";import{S as ee}from"./search-CLez4lf4.js";import{F as se}from"./filter-DKx0l9wP.js";import{X as D}from"./activity-feed-button-BJ1WYF4g.js";import{C as ae}from"./check-UcFQ4tla.js";import{T as le}from"./trash-2-DHkJLRzk.js";/* empty css            */import"./utils-Cuk0kyiu.js";import"./index-C0N98Kzt.js";import"./user-menu-content-CaD6Lgdg.js";import"./index-CZi-UQ4q.js";import"./index-D-s97nNy.js";import"./building-2-QMJfTkD6.js";import"./calendar-DXPEKcan.js";import"./users-ezrJfIw7.js";import"./clock-CX7qgJh_.js";import"./index-VkL8W5Kt.js";function De({mataKuliah:S,programStudi:F,filters:p,breadcrumbs:B}){const[f,g]=d.useState(null),{flash:n}=z().props,[w,T]=d.useState(!1),[v,C]=d.useState(!1),[l,A]=d.useState(p||{});d.useEffect(()=>{(n.success||n.error)&&(T(!0),setTimeout(()=>T(!1),3e3))},[n]),d.useEffect(()=>{const s=Object.values(p||{}).some(j=>j!==void 0&&j!=="");C(s)},[p]);const K=()=>{f&&N.delete(`/mata-kuliah/${f}`,{onSuccess:()=>g(null)})},c=(s,j)=>{A(L=>({...L,[s]:j}))},i=()=>{N.get("/mata-kuliah",l,{preserveState:!0})},H=()=>{A({}),N.get("/mata-kuliah",{},{preserveState:!0})},P=s=>{s.preventDefault(),i()};return e.jsxs(V,{breadcrumbs:B,children:[e.jsx(I,{title:"Mata Kuliah"}),w&&n.success&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-green-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:n.success})]})}),w&&n.error&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-500 px-6 py-3 text-white shadow-lg",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:n.error})]})}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Mata Kuliah"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola data mata kuliah UNUHA"})]}),e.jsx(_,{href:"/mata-kuliah/create",children:e.jsxs(h,{children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Tambah Mata Kuliah"]})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("form",{onSubmit:P,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Cari kode atau nama mata kuliah...",value:l.search||"",onChange:s=>{c("search",s.target.value),s.target.value===""&&i()},onKeyDown:s=>s.key==="Enter"&&i(),className:"pl-9 h-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:v?"default":"outline",onClick:()=>C(!v),className:"gap-2 h-10 whitespace-nowrap",size:"sm",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filter"}),Object.values(l).filter(s=>s).length>0&&e.jsx(b,{variant:"secondary",className:"ml-1 px-1.5 min-w-5 h-5",children:Object.values(l).filter(s=>s).length})]}),Object.values(l).some(s=>s)&&e.jsxs(h,{variant:"ghost",size:"sm",onClick:H,className:"h-10 gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),v&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 p-3 border rounded-lg bg-gradient-to-br from-muted/50 to-muted/30 backdrop-blur-sm",children:[e.jsxs(o,{value:l.program_studi_id||"all",onValueChange:s=>{c("program_studi_id",s==="all"?"":s),setTimeout(i,100)},children:[e.jsx(x,{className:"h-9 text-sm",children:e.jsx(m,{placeholder:"Prodi"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua Prodi"}),F.map(s=>e.jsx(a,{value:String(s.id),children:s.nama},s.id))]})]}),e.jsxs(o,{value:l.tingkat_semester||"all",onValueChange:s=>{c("tingkat_semester",s==="all"?"":s),setTimeout(i,100)},children:[e.jsx(x,{className:"h-9 text-sm",children:e.jsx(m,{placeholder:"Semester"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua"}),[1,2,3,4,5,6,7,8].map(s=>e.jsxs(a,{value:String(s),children:["Semester ",s]},s))]})]}),e.jsxs(o,{value:l.tipe_semester||"all",onValueChange:s=>{c("tipe_semester",s==="all"?"":s),setTimeout(i,100)},children:[e.jsx(x,{className:"h-9 text-sm",children:e.jsx(m,{placeholder:"Tipe"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua Tipe"}),e.jsx(a,{value:"ganjil",children:"Ganjil"}),e.jsx(a,{value:"genap",children:"Genap"}),e.jsx(a,{value:"both",children:"Keduanya"})]})]}),e.jsxs(o,{value:l.butuh_lab||"all",onValueChange:s=>{c("butuh_lab",s==="all"?"":s),setTimeout(i,100)},children:[e.jsx(x,{className:"h-9 text-sm",children:e.jsx(m,{placeholder:"Lab"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua"}),e.jsx(a,{value:"true",children:"Butuh Lab"}),e.jsx(a,{value:"false",children:"Tidak Butuh"})]})]}),e.jsxs(o,{value:l.is_aktif||"all",onValueChange:s=>{c("is_aktif",s==="all"?"":s),setTimeout(i,100)},children:[e.jsx(x,{className:"h-9 text-sm",children:e.jsx(m,{placeholder:"Status"})}),e.jsxs(u,{children:[e.jsx(a,{value:"all",children:"Semua"}),e.jsx(a,{value:"true",children:"Aktif"}),e.jsx(a,{value:"false",children:"Tidak Aktif"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(O,{children:[e.jsx(M,{children:e.jsxs(k,{children:[e.jsx(r,{children:"Kode"}),e.jsx(r,{children:"Nama Mata Kuliah"}),e.jsx(r,{children:"Prodi"}),e.jsx(r,{children:"SKS"}),e.jsx(r,{children:"Semester"}),e.jsx(r,{children:"Butuh Lab"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Aksi"})]})}),e.jsx(R,{children:S.length===0?e.jsx(k,{children:e.jsx(t,{colSpan:8,className:"text-center text-muted-foreground",children:"Belum ada data mata kuliah"})}):S.map(s=>e.jsxs(k,{children:[e.jsx(t,{className:"font-medium",children:s.kode}),e.jsx(t,{children:s.nama}),e.jsx(t,{children:s.program_studi.nama}),e.jsx(t,{children:s.sks}),e.jsx(t,{children:s.tingkat_semester}),e.jsx(t,{children:s.butuh_lab?e.jsx(ae,{className:"h-5 w-5 text-green-500"}):e.jsx(D,{className:"h-5 w-5 text-red-500"})}),e.jsx(t,{children:s.is_aktif?e.jsx(b,{variant:"default",children:"Aktif"}):e.jsx(b,{variant:"secondary",children:"Tidak Aktif"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{href:`/mata-kuliah/${s.id}/edit`,children:e.jsx(h,{variant:"outline",size:"sm",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>g(s.id),children:e.jsx(le,{className:"h-4 w-4 text-destructive"})})]})})]},s.id))})]})}),e.jsx(U,{open:f!==null,onOpenChange:()=>g(null),children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(q,{children:"Konfirmasi Hapus"}),e.jsx(J,{children:"Apakah Anda yakin ingin menghapus mata kuliah ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(Q,{children:[e.jsx(W,{children:"Batal"}),e.jsx(Y,{onClick:K,children:"Hapus"})]})]})})]})})]})}export{De as default};
