import{r as h,j as e,F as v,u as S,H as w,L as P,a as I}from"./app-BsRi02Wf.js";import{q as f}from"./index-D-s97nNy.js";import{s as C}from"./index-B_t3owr-.js";import{H as b,S as D}from"./layout-DKLBTKWF.js";import{I as n}from"./input-error-4r4GKSde.js";import{B as u}from"./button-4wnz9Zqb.js";import{D as H,n as L,a as T,c as V,d as K,e as U,o as E}from"./activity-feed-button-BJ1WYF4g.js";import{I as l}from"./input-BYt-uUAG.js";import{L as r}from"./label-CW3bZicJ.js";import{T as R}from"./textarea-CQXLHOGr.js";import{w as B,x as G,y as q,z}from"./user-menu-content-CaD6Lgdg.js";import{A as M}from"./app-layout-CdBpmueg.js";import{c as Y}from"./utils-Cuk0kyiu.js";import{z as J}from"./transition-BuQao4Gx.js";/* empty css            */import"./index-CZi-UQ4q.js";import"./index-CerjChKt.js";import"./badge-C_t0DFeo.js";import"./index-C0N98Kzt.js";import"./clock-CX7qgJh_.js";import"./building-2-QMJfTkD6.js";import"./calendar-DXPEKcan.js";import"./users-ezrJfIw7.js";const O=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],$=Y("Upload",O),d=a=>({url:d.url(a),method:"get"});d.definition={methods:["get","head"],url:"/settings/profile"};d.url=a=>d.definition.url+f(a);d.get=a=>({url:d.url(a),method:"get"});d.head=a=>({url:d.url(a),method:"head"});const c=a=>({url:c.url(a),method:"patch"});c.definition={methods:["patch"],url:"/settings/profile"};c.url=a=>c.definition.url+f(a);c.patch=a=>({url:c.url(a),method:"patch"});const o=a=>({url:o.url(a),method:"delete"});o.definition={methods:["delete"],url:"/settings/profile"};o.url=a=>o.definition.url+f(a);o.delete=a=>({url:o.url(a),method:"delete"});o.form=a=>({action:o.url(a),method:"delete"});const x={edit:d,update:c,destroy:o};function Q(){const a=h.useRef(null);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{title:"Hapus Akun",description:"Hapus akun Anda dan semua sumber dayanya"}),e.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[e.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[e.jsx("p",{className:"font-medium",children:"Peringatan"}),e.jsx("p",{className:"text-sm",children:"Harap lanjutkan dengan hati-hati, tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(H,{children:[e.jsx(L,{asChild:!0,children:e.jsx(u,{variant:"destructive","data-test":"delete-user-button",children:"Hapus Akun"})}),e.jsxs(T,{children:[e.jsx(V,{children:"Apakah Anda yakin ingin menghapus akun Anda?"}),e.jsx(K,{children:"Setelah akun Anda dihapus, semua sumber daya dan datanya juga akan dihapus secara permanen. Silakan masukkan kata sandi Anda untuk mengonfirmasi bahwa Anda ingin menghapus akun Anda secara permanen."}),e.jsx(v,{...x.destroy.form(),options:{preserveScroll:!0},onError:()=>a.current?.focus(),resetOnSuccess:!0,className:"space-y-6",children:({resetAndClearErrors:g,processing:t,errors:m})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"password",className:"sr-only",children:"Kata Sandi"}),e.jsx(l,{id:"password",type:"password",name:"password",ref:a,placeholder:"Kata Sandi",autoComplete:"current-password"}),e.jsx(n,{message:m.password})]}),e.jsxs(U,{className:"gap-2",children:[e.jsx(E,{asChild:!0,children:e.jsx(u,{variant:"secondary",onClick:()=>g(),children:"Batal"})}),e.jsx(u,{variant:"destructive",disabled:t,asChild:!0,children:e.jsx("button",{type:"submit","data-test":"confirm-delete-user-button",children:"Hapus Akun"})})]})]})})]})]})]})]})}const W=[{title:"Pengaturan Profil",href:B().url}];function ve({mustVerifyEmail:a,status:g,dosenData:t}){const{auth:m}=S().props,[y,A]=h.useState(m.user.avatar||null),[j,N]=h.useState(null),k=h.useRef(null),_=p=>{const i=p.target.files?.[0];if(i){N(i);const s=new FileReader;s.onloadend=()=>{A(s.result)},s.readAsDataURL(i)}},F=p=>{if(p.preventDefault(),!j)return;const i=new FormData;i.append("foto_profil",j),i.append("_method","PATCH"),I.post(x.update().url,i,{preserveScroll:!0,onSuccess:()=>{N(null)}})};return e.jsxs(M,{breadcrumbs:W,children:[e.jsx(w,{title:"Pengaturan Profil"}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{title:"Informasi Profil",description:"Perbarui foto profil, nama, email, dan informasi pribadi Anda"}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsx(r,{children:"Foto Profil"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(G,{className:"h-24 w-24",children:[e.jsx(q,{src:y||void 0,alt:m.user.name}),e.jsx(z,{className:"text-2xl bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:m.user.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"file",ref:k,name:"foto_profil",accept:"image/*",onChange:_,className:"hidden"}),e.jsxs(u,{type:"button",variant:"outline",onClick:()=>k.current?.click(),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Unggah Foto"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG atau GIF (maks. 2MB)"})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(u,{type:"submit",disabled:!j,"data-test":"update-photo-button",children:"Simpan Foto"})})]}),e.jsx(v,{action:x.update().url,method:x.update().method,options:{preserveScroll:!0},className:"space-y-6 border-t pt-6",children:({processing:p,recentlySuccessful:i,errors:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"name",children:"Nama"}),e.jsx(l,{id:"name",className:"mt-1 block w-full",defaultValue:m.user.name,name:"name",required:!0,autoComplete:"name",placeholder:"Nama Lengkap"}),e.jsx(n,{className:"mt-2",message:s.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"email",children:"Alamat Email"}),e.jsx(l,{id:"email",type:"email",className:"mt-1 block w-full",defaultValue:m.user.email,name:"email",required:!0,autoComplete:"username",placeholder:"Alamat Email"}),e.jsx(n,{className:"mt-2",message:s.email})]}),t&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informasi Dosen"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"nidn",children:"NIDN"}),e.jsx(l,{id:"nidn",name:"nidn",defaultValue:t.nidn||"",placeholder:"NIDN"}),e.jsx(n,{message:s.nidn})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"nip",children:"NIPY"}),e.jsx(l,{id:"nip",name:"nip",defaultValue:t.nip||"",placeholder:"NIPY"}),e.jsx(n,{message:s.nip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"gelar_depan",children:"Gelar Depan"}),e.jsx(l,{id:"gelar_depan",name:"gelar_depan",defaultValue:t.gelar_depan||"",placeholder:"Dr., Prof., dll"}),e.jsx(n,{message:s.gelar_depan})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"gelar_belakang",children:"Gelar Belakang"}),e.jsx(l,{id:"gelar_belakang",name:"gelar_belakang",defaultValue:t.gelar_belakang||"",placeholder:"S.Kom., M.Kom., dll"}),e.jsx(n,{message:s.gelar_belakang})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"no_telp",children:"No. Telepon"}),e.jsx(l,{id:"no_telp",name:"no_telp",defaultValue:t.no_telp||"",placeholder:"08xxxxxxxxxx"}),e.jsx(n,{message:s.no_telp})]}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"alamat",children:"Alamat"}),e.jsx(R,{id:"alamat",name:"alamat",defaultValue:t.alamat||"",placeholder:"Alamat lengkap",rows:3}),e.jsx(n,{message:s.alamat})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{children:"Program Studi"}),e.jsx(l,{value:t.program_studi?.nama||"-",disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{children:"Kampus Utama"}),e.jsx(l,{value:t.kampus_utama?.nama||"Semua Kampus",disabled:!0,className:"bg-muted"})]})]})]})}),a&&m.user.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"-mt-4 text-sm text-muted-foreground",children:["Alamat email Anda belum terverifikasi."," ",e.jsx(P,{href:C(),as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Klik di sini untuk mengirim ulang email verifikasi."})]}),g==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"Tautan verifikasi baru telah dikirim ke alamat email Anda."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{disabled:p,"data-test":"update-profile-button",children:"Simpan"}),e.jsx(J,{show:i,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Tersimpan"})})]})]})})]}),e.jsx(Q,{})]})]})}export{ve as default};
